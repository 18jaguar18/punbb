/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
    v2.0.3 (c) Kyle Simpson
    MIT License
*/
(function(W){var f=W.$LAB,j="UseLocalXHR",g="AlwaysPreserveOrder",p="AllowDuplicates",V="CacheBust",T="BasePath",R=/^[^?#]*\//.exec(location.href)[0],Q=/^\w+\:\/\/\/?[^\/]+/.exec(R)[0],X=document.head||document.getElementsByTagName("head"),e=(W.opera&&Object.prototype.toString.call(W.opera)=="[object Opera]")||("MozAppearance" in document.documentElement.style),U=document.createElement("script"),w=typeof U.preload=="boolean",S=w||(U.readyState&&U.readyState=="uninitialized"),n=!S&&U.async===true,d=!S&&!n&&!e;function m(i){return Object.prototype.toString.call(i)=="[object Function]";}function l(i){return Object.prototype.toString.call(i)=="[object Array]";}function c(o,q){var i=/^\w+\:\/\//;if(/^\/\/\/?/.test(o)){o=location.protocol+o;}else{if(!i.test(o)&&o.charAt(0)!="/"){o=(q||"")+o;}}return i.test(o)?o:((o.charAt(0)=="/"?Q:R)+o);}function x(o,q){for(var i in o){if(o.hasOwnProperty(i)){q[i]=o[i];}}return q;}function b(o){var q=false;for(var i=0;i<o.scripts.length;i++){if(o.scripts[i].ready&&o.scripts[i].exec_trigger){q=true;o.scripts[i].exec_trigger();o.scripts[i].exec_trigger=null;}}return q;}function v(o,r,i,q){o.onload=o.onreadystatechange=function(){if((o.readyState&&o.readyState!="complete"&&o.readyState!="loaded")||r[i]){return;}o.onload=o.onreadystatechange=null;q();};}function k(i){i.ready=i.finished=true;for(var o=0;o<i.finished_listeners.length;o++){i.finished_listeners[o]();}i.ready_listeners=[];i.finished_listeners=[];}function a(s,q,r,o,i){setTimeout(function(){var u,y=q.real_src,t;if("item" in X){if(!X[0]){setTimeout(arguments.callee,25);return;}X=X[0];}u=document.createElement("script");if(q.type){u.type=q.type;}if(q.charset){u.charset=q.charset;}if(i){if(S){r.elem=u;if(w){u.preload=true;u.onpreload=o;}else{u.onreadystatechange=function(){if(u.readyState=="loaded"){o();}};}u.src=y;}else{if(i&&y.indexOf(Q)==0&&s[j]){t=new XMLHttpRequest();t.onreadystatechange=function(){if(t.readyState==4){t.onreadystatechange=function(){};r.text=t.responseText+"\n//@ sourceURL="+y;o();}};t.open("GET",y);t.send();}else{u.type="text/cache-script";v(u,r,"ready",function(){X.removeChild(u);o();});u.src=y;X.insertBefore(u,X.firstChild);}}}else{if(n){u.async=false;v(u,r,"finished",o);u.src=y;X.insertBefore(u,X.firstChild);}else{v(u,r,"finished",o);u.src=y;X.insertBefore(u,X.firstChild);}}},0);}function h(){var o={},t=S||d,y=[],u={},i;o[j]=true;o[g]=false;o[p]=false;o[V]=false;o[T]="";function s(A,D,z){var C;function B(){if(C!=null){C=null;k(z);}}if(u[D.src].finished){return;}if(!A[p]){u[D.src].finished=true;}C=z.elem||document.createElement("script");if(D.type){C.type=D.type;}if(D.charset){C.charset=D.charset;}v(C,z,"finished",B);if(z.elem){z.elem=null;}else{if(z.text){C.onload=C.onreadystatechange=null;C.text=z.text;}else{C.src=D.real_src;}}X.insertBefore(C,X.firstChild);if(z.text){B();}}function r(G,z,F,D){var E,C,B=function(){z.ready_cb(z,function(){s(G,z,E);});},A=function(){z.finished_cb(z,F);};z.src=c(z.src,G[T]);z.real_src=z.src+(G[V]?((/\?.*$/.test(z.src)?"&_":"?_")+~~(Math.random()*1000000000)+"="):"");if(!u[z.src]){u[z.src]={items:[],finished:false};}C=u[z.src].items;if(G[p]||C.length==0){E=C[C.length]={ready:false,finished:false,ready_listeners:[B],finished_listeners:[A]};a(G,z,E,((D)?function(){E.ready=true;for(var H=0;H<E.ready_listeners.length;H++){E.ready_listeners[H]();}E.ready_listeners=[];}:function(){k(E);}),D);}else{E=C[0];if(E.finished){A();}else{E.finished_listeners.push(A);}}}function q(){var G,F=x(o,{}),E=[],D=0,I=false,C;function B(J,K){J.ready=true;J.exec_trigger=K;H();}function A(K,L){K.ready=K.finished=true;K.exec_trigger=null;for(var J=0;J<L.scripts.length;J++){if(!L.scripts[J].finished){return;}}L.finished=true;H();}function H(){while(D<E.length){if(m(E[D])){try{E[D++]();}catch(J){}continue;}else{if(!E[D].finished){if(b(E[D])){continue;}break;}}D++;}if(D==E.length){I=false;C=false;}}function z(){if(!C||!C.scripts){E.push(C={scripts:[],finished:true});}}G={script:function(){for(var J=0;J<arguments.length;J++){(function(L,N){var K;if(!l(L)){N=[L];}for(var M=0;M<N.length;M++){z();L=N[M];if(m(L)){L=L();}if(!L){continue;}if(l(L)){K=[].slice.call(L);K.unshift(M,1);[].splice.apply(N,K);M--;continue;}if(typeof L=="string"){L={src:L};}L=x(L,{ready:false,ready_cb:B,finished:false,finished_cb:A});C.finished=false;C.scripts.push(L);r(F,L,C,(t&&I));I=true;if(F[g]){G.wait();}}})(arguments[J],arguments[J]);}return G;},wait:function(){if(arguments.length>0){for(var J=0;J<arguments.length;J++){E.push(arguments[J]);}C=E[E.length-1];}else{C=false;}H();return G;}};return{script:G.script,wait:G.wait,setOptions:function(J){x(J,F);return G;}};}i={setGlobalDefaults:function(z){x(z,o);return i;},setOptions:function(){return q().setOptions.apply(null,arguments);},script:function(){return q().script.apply(null,arguments);},wait:function(){return q().wait.apply(null,arguments);},queueScript:function(){y[y.length]={type:"script",args:[].slice.call(arguments)};
return i;},queueWait:function(){y[y.length]={type:"wait",args:[].slice.call(arguments)};return i;},runQueue:function(){var A=i,C=y.length,z=C,B;for(;--z>=0;){B=y.shift();A=A[B.type].apply(null,B.args);}return A;},noConflict:function(){W.$LAB=f;return i;},sandbox:function(){return h();}};return i;}W.$LAB=h();(function(o,q,i){if(document.readyState==null&&document[o]){document.readyState="loading";document[o](q,i=function(){document.removeEventListener(q,i,false);document.readyState="complete";},false);}})("addEventListener","DOMContentLoaded");})(this);if(typeof PUNBB==="undefined"||!PUNBB){var PUNBB={};}PUNBB.common=(function(){var e=document.documentElement,d=false,a=false;function b(f){return document.getElementById(f);}function c(f,h){if(f&&h){if(f.value.length===0&&h.value.length===0){return;}if(f.value===h.value){return;}var g=parseInt(h.getAttribute("maxlength"),10)||0;if(g>0){h.value=f.value.replace(/@.*/,"").replace(/\s/g,"").substr(0,g);}else{h.value=f.value.replace(/@.*/,"").replace(/\s/g,"");}}}return{on_domready_init:function(){d=true;PUNBB.common.addClass(e,"js");PUNBB.common.attachWindowOpen();PUNBB.common.autoFocus();PUNBB.common.attachCtrlEnterForm();PUNBB.common.attachUsernameFromEmail();PUNBB.common.attachEmailFieldFixer();if(!PUNBB.common.input_support_attr("required")){PUNBB.common.attachValidateForm();}var f=b("brd-messages");if(f){setTimeout(function(){f.style.visibility="hidden";},3500);}},on_load_init:function(){a=true;},addLoadEvent:function(g){if(a===true){g();}else{var f=window.onload;window.onload=(f&&typeof f==="function")?function(){f();g();}:g;}},addDOMReadyEvent:function(h){var f=false;if(d===true){h();return;}if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){h();f=true;},false);window.addEventListener("load",function(){if(!f){h();}},false);}else{if(window.attachEvent){if(window.ActiveXObject&&window===window.top){g();}else{window.attachEvent("onload",h);}}else{PUNBB.common.addLoadEvent(h);}}function g(){try{e.doScroll("left");}catch(i){setTimeout(g,0);return;}h();}},hasClass:function(g,f){return(new RegExp("\\b"+f+"\\b")).test(g.className);},addClass:function(g,f){if(PUNBB.common.hasClass(g,f)){return false;}else{g.className+=" "+f;}return true;},removeClass:function(g,f){if(!PUNBB.common.hasClass(g,f)){return false;}f=new RegExp("\\s*\\b"+f+"\\b","g");g.className=g.className.replace(f,"");return true;},blink:function(h,g){if(typeof g===undefined){g=2;}var f=h.style.visibility;if(g&&f!=="hidden"){h.style.visibility="hidden";setTimeout(function(){h.style.visibility=f;},200);setTimeout(function(){PUNBB.common.blink(h,g-1);},400);}},onScreen:function(m){function j(){var n=-1;if(window.pageYOffset){n=window.pageYOffset;}else{if(e&&e.scrollTop){n=e.scrollTop;}else{if(document.body){n=document.body.scrollTop;}}}return n;}function i(){var n=-1;if(window.innerHeight){n=window.innerHeight;}else{if(e&&e.clientHeight){n=e.clientHeight;}else{if(document.body){n=document.body.clientHeight;}}}return n;}function g(p){var o=p.offsetTop;p=p.offsetParent;return p?o+=g(p):o;}var f=j(),l=f+i(),h=g(m),k=h+m.clientHeight;return h>=f&&k<l;},map:function(j,g){var h,f;for(h=0,f=g.length;h<f;h+=1){g[h]=j(g[h]);}return g;},find:function(j,g){var h,f;for(h=0,f=g.length;h<f;h+=1){if(j(g[h])){return h;}}return -1;},arrayOfMatched:function(k,h){var j,g,f=[];for(j=0,g=h.length;j<g;j+=1){if(k(h[j])){f.push(h[j]);}}return f;},flatten:function(g){var h,f,j=[];for(h=0,f=g.length;h<f;h+=1){if(typeof g[h]==="object"&&g.length){j.concat(PUNBB.common.flatten(g[h]));}else{j.push(g[h]);}}return j;},validateForm:function(h){var g=function(m){return m.name&&m.name.indexOf("req_")===0;};var j=h.elements,f=PUNBB.common.arrayOfMatched(g,j);g=function(m){return(/^\s*$/).test(m.value);};var i=PUNBB.common.find(g,f);if(i>-1){if(PUNBB.common.find(g,f)>-1){var l=b("req-msg");PUNBB.common.removeClass(l,"req-warn");var k=PUNBB.common.addClass(l,"req-error");if(!PUNBB.common.onScreen(l)){l.scrollIntoView();setTimeout(function(){PUNBB.common.blink(l);},500);}else{if(!k){PUNBB.common.blink(l);}}if(PUNBB.common.onScreen(f[i])){f[i].focus();}return false;}}return true;},doQuickjumpRedirect:function(h,g){var f=b("qjump-select")[b("qjump-select").selectedIndex].value;h=h.replace("$1",f);h=h.replace("$2",g[f]);document.location=h;return false;},attachQuickjumpRedirect:function(f,i){var h=b("qjump-select"),g=b("qjump-submit");if(h){h.onchange=function(){return PUNBB.common.doQuickjumpRedirect(f,i);};}if(g){g.onclick=function(){return PUNBB.common.doQuickjumpRedirect(f,i);};PUNBB.common.addClass(g,"visual-hidden");}},initToggleCheckboxes:function(){var k=function(i){return function(){return PUNBB.common.toggleCheckboxes(i);};};var g,f,l=document.getElementsByTagName("span");for(g=0,f=l.length;g<f;g+=1){var h=l[g];if(PUNBB.common.hasClass(h,"select-all")&&h.getAttribute("data-check-form")){var j=b(h.getAttribute("data-check-form"));if(j){h.onclick=k(j);}}}},toggleCheckboxes:function(j){if(!j){return false;
}var g,f,k=j.getElementsByTagName("input");for(g=0,f=k.length;g<f;g+=1){var h=k[g];if(h.getAttribute("data-no-select-all")){continue;}if(h.getAttribute("type")=="checkbox"&&h.disabled===false){h.checked=!h.checked;}}return false;},attachCtrlEnterForm:function(){var r=function(f){return function(j){j=j||window.event;var i=j.keyCode||j.which;if(((i==13)||(i==10))&&(j.ctrlKey===true)){return f.submit();}};};var n=function(f){return f.tagName.toUpperCase()=="TEXTAREA";};var m,q,h=document.forms;for(m=0,q=h.length;m<q;m+=1){var p=h[m];if(!PUNBB.common.hasClass(p,"frm-ctrl-submit")){continue;}var l,o,g=p.elements,k=PUNBB.common.arrayOfMatched(n,g);for(l=0,o=k.length;l<o;l+=1){k[l].onkeypress=r(p);}}},attachValidateForm:function(){var o=function(i){return i.name&&i.name.indexOf("req_")===0;};var l=function(i){return i.type&&(i.type=="submit"&&i.name!="cancel");};var m=function(i){return function(){return PUNBB.common.validateForm(i);};};var k,n,g=document.forms;for(k=0,n=g.length;k<n;k+=1){var f=g[k].elements;if(PUNBB.common.find(o,f)>-1){var h=PUNBB.common.arrayOfMatched(l,f),j=g[k];h=PUNBB.common.map(function(i){i.onclick=m(j);},h);}}},attachWindowOpen:function(){if(!document.getElementsByTagName){return;}var h=function(){return function(){window.open(this.href);return false;};};var g,f=document.getElementsByTagName("a");for(g=0;g<f.length;g+=1){if(PUNBB.common.hasClass(f[g],"exthelp")){f[g].onclick=h();}}},autoFocus:function(){var g=function(i){return i.offsetWidth>0&&(i.tagName.toUpperCase()=="TEXTAREA"||(i.tagName.toUpperCase()=="INPUT"&&(i.type=="text")||(i.type=="password")||(i.type=="email")||(i.type=="url")||(i.type=="number")));};var f=b("afocus");if(!f||window.location.hash.replace(/#/g,"")){return;}f=f.all||f.getElementsByTagName("*");var h=PUNBB.common.find(g,f);if(h>-1){f[h].focus();}},input_support_attr:function(f){var g=document.createElement("input");if(!f){return false;}return !!(f in g);},attachUsernameFromEmail:function(){var m=function(f){return(f.tagName.toUpperCase()=="INPUT"&&f.type=="email"&&f.getAttribute("data-suggest-role")==="email");};var p=function(f){return(f.tagName.toUpperCase()=="INPUT"&&f.type=="text"&&f.getAttribute("data-suggest-role")==="username");};var j,n,g=document.forms;for(j=0,n=g.length;j<n;j+=1){var l=g[j],k=-1,h=-1;if(!PUNBB.common.hasClass(l,"frm-suggest-username")){continue;}k=PUNBB.common.find(m,l.elements);h=PUNBB.common.find(p,l.elements);if(k>0&&h>0){var o=function(f){return function(i){c(this,f);};};l.elements[k].onkeyup=o(l.elements[h]);}}},attachEmailFieldFixer:function(){var n=function(i){return(i.tagName.toUpperCase()=="INPUT"&&i.type=="email");};var p=function(){var i=this;if(i&&i.value.length>0){i.value=i.value.replace(/\s/g,"");}};var l,o,g=document.forms;for(l=0,o=g.length;l<o;l+=1){var k,m,f=g[l].elements,h=PUNBB.common.arrayOfMatched(n,f);for(k=0,m=h.length;k<m;k+=1){h[k].onblur=p;}}}};}());PUNBB.common.addDOMReadyEvent(PUNBB.common.on_domready_init);PUNBB.common.addLoadEvent(PUNBB.common.on_load_init);