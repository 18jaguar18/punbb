<?xml version="1.0" encoding="UTF-8"?>
<project name="Webtasks example" default="init">
	<description>Сборка Fancy jQuery</description>
	<import file="webtasks.xml"/>
	<property name="webtasks.dir" value="${basedir}" />


	<!-- Где хранятся исходники CSS и JS -->
	<property name="js-src" value="${basedir}/../js" />
	<property name="css-src" value="${basedir}/../css" />

	<!-- Куда сохранять результат -->
	<property name="js" value="${basedir}/../../j/" />
	<property name="css" value="${basedir}/../../c/" />

	<target name="init" depends="webtasks.init, make-js, make-css">
		<echo>Build done.</echo>
	</target>

	<target name="make-js">
		<mkdir dir="${js}"/>

		<!-- Сжимаем несколько файлов в одну библиотеку -->
		<compress-js-lib tofile="${js}/lib.min.js" force="true">
			<filelist dir="${js-src}">
				<file name="jquery-1.5.2.min.js"/>
				<file name="jquery.sha1.js"/>
				<file name="jquery.tools.min.js"/>
				<file name="jquery.form.js"/>
				<file name="jquery.easing.js"/>
				<file name="jquery.timers-1.2.js"/>
				<file name="jquery.cookie.js"/>
				<file name="jquery.mousewheel.js"/>
				<file name="jquery.extend.js"/>
				<file name="jquery.fader.js"/>
				<file name="jquery.hotkeys.js"/>
				<file name="jquery.fancybox-1.3.4.js"/>
				<file name="underscore.js"/>
				<file name="common.js"/>
				<file name="forum.console.js"/>
				<file name="forum.utils.js"/>
				<file name="forum.ajax_indicator.js"/>
				<file name="forum.message.js"/>
				<file name="forum.storage.js"/>
				<file name="forum.storage.local.js"/>
				<file name="forum.storage.session.js"/>
			</filelist>
		</compress-js-lib>
	</target>

	<!-- CSS -->
	<target name="make-css">
		<mkdir dir="${css}"/>

		<!-- Oxygen style -->
		<compress-css-lib tofile="${css}/Oxygen/style.css" force="true">
			<filelist dir="${css-src}">
				<file name="Oxygen/forum.ajax_indicator.css"/>
				<file name="Oxygen/forum.message.css"/>
				<file name="Oxygen/jquery.fancybox-1.3.4.css"/>
			</filelist>
		</compress-css-lib>

		<!-- dark_Oxygen style -->
		<compress-css-lib tofile="${css}/dark_Oxygen/style.css" force="true">
			<filelist dir="${css-src}">
				<file name="dark_Oxygen/forum.ajax_indicator.css"/>
				<file name="dark_Oxygen/forum.message.css"/>
				<file name="dark_Oxygen/jquery.fancybox-1.3.4.css"/>
			</filelist>
		</compress-css-lib>
	</target>
</project>
